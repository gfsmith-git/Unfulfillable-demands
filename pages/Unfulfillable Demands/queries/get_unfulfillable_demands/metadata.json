{
  "gitSyncId": "667d899f836ece332f54d61c_9e471910-a130-42e7-88f9-e61e0bb7e942",
  "id": "Unfulfillable Demands_get_unfulfillable_demands",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "WITH loglist as(\nSELECT DISTINCT ON (\"%Prod_Code\")\n\"%Prod_Code\",\n\"Actioned_Status\",\n\"Comments\",\n\"User\",\n\"Date\",\n\"Actioned\"\nFROM unfulfillable_demands.\"actioned_ud_products\" \nWHERE \"New\" ='1'),\n\nUD as\n (SELECT \n\tunfulfillable_demands.\"%Prod_Code\",\n\tCASE WHEN LEFT(unfulfillable_demands.\"%Prod_Code\",1) = 'A' THEN 'RKB'\n\tELSE 'GFS' END \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas \"Selling Company\",\n\tCASE WHEN unfulfillable_demands.\"ud_int\" IS NULL THEN 0 ELSE unfulfillable_demands.\"ud_int\" END,\n\tCASE WHEN unfulfillable_demands.\"ud_onpo\" IS NULL THEN 0 ELSE unfulfillable_demands.\"ud_onpo\" END,\n\tCASE WHEN unfulfillable_demands.\"ud_in_transit\" IS NULL THEN 0 ELSE unfulfillable_demands.\"ud_in_transit\" END,\n\tunfulfillable_demands.\"ud_demands\",\n\tCASE WHEN unfulfillable_demands.\"ud_physical\" IS NULL THEN 0 ELSE unfulfillable_demands.\"ud_physical\" END,\n\tunfulfillable_demands.\"Full Product\",\n\tunfulfillable_demands.\"ud_available\",\n\tunfulfillable_demands.\"ud_totalfree\",\n\tto_char(unfulfillable_demands.\"ud_totalfree\", 'FM999999.90')\t\t\t\t\t\t\t\tas \"TotalF\",\t\n\tCASE WHEN unfulfillable_demands.\"ud_calloffqty\" IS NULL THEN 0 ELSE unfulfillable_demands.\"ud_calloffqty\" END,\n\tunfulfillable_demands.\"Product Status Code\",\n\tloglist.\"Actioned_Status\",\n\tloglist.\"Comments\",\n\tloglist.\"User\",\n\tloglist.\"Date\"\t\t\t\t\t\t\t\t\t\t\t\t\tas \"Log Date\",\n\tCASE WHEN loglist.\"Actioned\" = 'Y' THEN 'Y'\n\t\tELSE 'N'\n\t\tEnd\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas \"Actioned\"\nFROM unfulfillable_demands.\"unfulfillable_demands\"\n\nLEFT JOIN loglist on unfulfillable_demands.\"%Prod_Code\" = loglist.\"%Prod_Code\"\nORDER BY \"ud_totalfree\" ASC)\n\t\nSELECT *\nFROM UD\n\tWHERE \"Actioned\" <> CASE\n    WHEN {{Ignore_actioned.selectedOptionValue}} = 'Y' THEN 'N'\n    WHEN {{Ignore_actioned.selectedOptionValue}} = 'N' THEN 'Y'\n\t\tELSE 'ALL'\nEND AND \"Selling Company\" <> CASE\n    WHEN {{SellCo.selectedOptionValue}} = 'RKB' THEN 'GFS'\n    WHEN {{SellCo.selectedOptionValue}} = 'GFS' THEN 'RKB'\n    ELSE 'ALL'\nEND;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "Orders",
      "isAutoGenerated": false,
      "name": "Orders",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": false,
    "name": "get_unfulfillable_demands",
    "pageId": "Unfulfillable Demands",
    "userSetOnLoad": true
  }
}